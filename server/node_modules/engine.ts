const Gpio: any = require('pigpio').Gpio;


export default class Engine {
    private backWard;
    private forWard;
    private rightWard;
    private leftWard;
    private Speed;


    constructor(backPin: number, frontPin: number, rightPin: number , leftPin: number) {
        this.backWard = new Gpio(backPin, {mode: Gpio.OUTPUT});
        this.forWard = new Gpio(frontPin, {mode: Gpio.OUTPUT});
        this.rightWard = new Gpio(rightPin, {mode: Gpio.OUTPUT});
        this.leftWard = new Gpio(leftPin, {mode: Gpio.OUTPUT});
        this.Speed = 0;
    }

    stopMoving() {
        this.backWard.pwmWrite(0);
        this.forWard.pwmWrite(0);
    }
    stopRotation(){
        this.rightWard.digitalWrite(0);
        this.leftWard.digitalWrite(0);
    }

    completeStop(){
        this.backWard.pwmWrite(0);
        this.forWard.pwmWrite(0);
        this.rightWard.digitalWrite(0);
        this.leftWard.digitalWrite(0);
    }

    setSpeed(speed: number){
        this.Speed = speed;
    }

    forward(){
        this.stopMoving();
        this.forWard.pwmWrite(this.Speed);
    }

    backward(){
        this.stopMoving()
        this.backWard.pwmWrite(this.Speed);
    }

    right(){
        this.stopRotation();
        this.rightWard.digitalWrite(1);

    }

    left(){
        this.stopRotation();
        this.leftWard.digitalWrite(1);
    }
}
